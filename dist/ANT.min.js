(function b(c,d,e){function a(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof require&&require;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var f=d[h]={exports:{}};c[h][0].call(f.exports,function(b){var d=c[h][1][b];return a(d?d:b)},f,f.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof require&&require,f=0;f<e.length;f++)a(e[f]);return a})({1:[function(a,b){b.exports=async function({databaseName:a,models:b,workersPath:c,version:d}){return new Promise(function(f){let g=new Worker(c+"/database-create.js");g.onmessage=function(a){f(a.data),g.terminate()},g.postMessage({databaseName:a,models:b,version:d})})}},{}],2:[function(a,b){b.exports=async function({databaseName:a,model:b,modelName:c,workersPath:d,version:e}){return new Promise(function(f){let g=new Worker(d+"/database-destroy.js");g.onmessage=function(a){f(a.data),g.terminate()},g.postMessage({databaseName:a,model:b.toJSON(),modelName:c,version:e})})}},{}],3:[function(a,b){var c=a("../functions/createDatabase.js");b.exports=async function({databaseName:a,workersPath:b,modelsPaths:d,version:e}){ANT.workersPath=b,ANT.databaseName=a,ANT.version=e;let f=[];for(let c in d){let a=d[c],b=await fetch(window.location.origin+a,{credentials:"include"}),e=await b.text(),g=e.concat(`//@ sourceURL=http://ANT_MODELS${a}`),h=new Function("return ".concat(g)),i=h();ANT[c]=i,f.push({modelName:c,columns:ANT[c].prototype.columns})}await c({databaseName:a,workersPath:b,version:e,models:f})}},{"../functions/createDatabase.js":1}],4:[function(a,b){b.exports=async function({databaseName:a,model:b,modelName:c,workersPath:d,version:e}){return new Promise(function(f){let g=new Worker(d+"/database-persist.js");g.onmessage=function(a){f(a.data),g.terminate()},g.postMessage({databaseName:a,model:b.toJSON(),modelName:c,version:e})})}},{}],5:[function(a,b){b.exports=async function({databaseName:a,query:b,modelName:c,workersPath:d,version:e}){return new Promise(function(f){let g=new Worker(d+"/database-query.js");g.onmessage=function(a){f(a.data),g.terminate()},g.postMessage({databaseName:a,query:b,modelName:c,version:e})})}},{}],6:[function(a){ANT={Model:a("./model.js"),TYPES:a("./types.js"),init:a("./functions/init.js")}},{"./functions/init.js":3,"./model.js":7,"./types.js":8}],7:[function(a,b){const c=a("./types.js"),d=a("./functions/persist.js"),e=a("./functions/destroy.js"),f=a("./functions/query.js");let g=a("./utils/pipe-functions.js");class h{setColumns(a){for(let b in this.columnsDefinition={},a)this.columnsDefinition[b]=a[b];return this.columnsDefinition.ANTID={type:c.NUMBER,primary:!0,uniq:!0,defaultValue:null},this.columnsDefinition}get columns(){return this.columnsDefinition||(this.columnsDefinition.ANTID={type:c.NUMBER,primary:!0,unique:!0,defaultValue:null}),this.columnsDefinition}constructor(){let a=this.columns,b={};for(let d in arguments.length&&(b=arguments[0]),g(this.constructor.beforeBulk,[b],this),a){let e=a[d],f=e.defaultValue?c.convert(e.defaultValue,e.type):null;this[d]=b[d]?c.convert(b[d],e.type):f}g(this.constructor.afterBulk,[b],this)}toJSON(){let a={};for(let b in this.columns)a[b]=this[b];return a}async persist(){g(this.constructor.beforePersist,[],this);let a=await d({databaseName:ANT.databaseName,version:ANT.version,workersPath:ANT.workersPath,model:this,modelName:this.constructor.name});return g(this.constructor.afterPersist,[a],this),a}async destroy(){g(this.constructor.beforeDelete,[],this);let a=await e({databaseName:ANT.databaseName,version:ANT.version,workersPath:ANT.workersPath,model:this,modelName:this.constructor.name});return g(this.constructor.afterDelete,[a],this),a}async update(a){for(let b in g(this.constructor.beforeUpdate,[a],this),a)this[b]=a[b];let b=await this.persist();return g(this.constructor.afterUpdate,[b],this),this}static async create(a){g(this.constructor.beforeCreate,[a],this);let b=new this(a),c=await b.persist();return b.ANTID=c.ANTID,g(this.constructor.afterCreate,[c],this),b}static async findAll(a){let b=[],c=await f({databaseName:ANT.databaseName,version:ANT.version,workersPath:ANT.workersPath,modelName:this.name,query:a});if(c.success){let a=c.result;for(let c of a)b.push(new this(c))}else throw new Error("Error on executing query");return b}static async findOne(a){let b=await f({databaseName:ANT.databaseName,version:ANT.version,workersPath:ANT.workersPath,modelName:this.name,query:a});if(b.success){let a=b.result;if(a[0])return a[0]}else throw new Error("Error on executing query")}static get beforeCreate(){return[]}static get beforeUpdate(){return[]}static get beforeBulk(){return[]}static get beforeDelete(){return[]}static get beforePersist(){return[]}static get afterCreate(){return[]}static get afterUpdate(){return[]}static get afterBulk(){return[]}static get afterDelete(){return[]}static get afterPersist(){return[]}}b.exports=h},{"./functions/destroy.js":2,"./functions/persist.js":4,"./functions/query.js":5,"./types.js":8,"./utils/pipe-functions.js":9}],8:[function(a,b){b.exports={NUMBER:"number",STRING:"string",BOOL:"bool",DATE:"date",convert:function(a,b){return b==this.NUMBER?parseFloat(a):b==this.STRING?"undefined"==typeof a?void 0:null===a?null:new String(a).toString():b==this.BOOL?!!a:b==this.DATE?"undefined"==typeof a?void 0:null===a?null:new Date(a):a}}},{}],9:[function(a,b){b.exports=function(a,b,c){c||(c=window);let d=a.map((a)=>a.apply(c,b));return d}},{}]},{},[6]);